<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for helpers/HedgingVaultOperatorHelper.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">helpers/</a> HedgingVaultOperatorHelper.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/9</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/0</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/5</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/9</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * SPDX-License-Identifier: Apache-2.0
 */
pragma solidity 0.8.14;
&nbsp;
import "../interfaces/IPotionBuyAction.sol";
import "../interfaces/IVault.sol";
import { Ownable } from "@openzeppelin/contracts/access/Ownable.sol";
import "../interfaces/IUniswapV3Oracle.sol";
import "../interfaces/IPotionProtocolOracle.sol";
&nbsp;
/**  
    @title HedgingVaultOperatorHelper
&nbsp;
    @author Roberto Cano &lt;robercano&gt;
&nbsp;
    @notice Helper contract to allow the operator to enter and exit a position of a hedging vault using only
    one transaction. The Hedging Vault is an investment vault using the PotionBuyAction strategy. The helper
    talks to both the vault and the action separately to configure the necessary swap routes and potion buy
    counterparties, and then enters the position. This also allows to minimize the amount of slippage in the
    Uniswap V3 swap and the Potion Protocol buy.
 */
contract HedgingVaultOperatorHelper is Ownable {
    IVault public immutable hedgingVault;
    IPotionBuyAction public immutable potionBuyAction;
&nbsp;
    /**
        @notice Initializes the helper with the vault and the action to be used to enter and exit the position.
&nbsp;
        @param hedgingVault_ The vault to be used to enter and exit the position.
        @param potionBuyAction_ The action to be used to enter and exit the position.
    */
<span class="fstat-no" title="function not covered" >    constructor(address hedgingVault_, address potionBuyAction_) {</span>
<span class="cstat-no" title="statement not covered" >        hedgingVault = IVault(hedgingVault_)</span>;
<span class="cstat-no" title="statement not covered" >        potionBuyAction = IPotionBuyAction(potionBuyAction_)</span>;
    }
&nbsp;
    /**
        @notice Enters the position of the hedging vault by setting first the Potion buy counterparties list
        and the Uniswap V3 swap route, and then entering the position.
&nbsp;
        @param swapInfo The Uniswap V3 route to swap some hedged asset for USDC to pay the Potion Protocol premium
        @param potionBuyInfo List of counterparties to use for the Potion Protocol buy
&nbsp;
        @dev Only the owner of the contract (i.e. the Operator) can call this function
     */
<span class="fstat-no" title="function not covered" >    function enterPosition(</span>
        IUniswapV3Oracle.SwapInfo calldata swapInfo,
        IPotionProtocolOracle.PotionBuyInfo calldata potionBuyInfo
    ) external onlyOwner {
<span class="cstat-no" title="statement not covered" >        potionBuyAction.setPotionBuyInfo(potionBuyInfo)</span>;
<span class="cstat-no" title="statement not covered" >        potionBuyAction.setSwapInfo(swapInfo)</span>;
<span class="cstat-no" title="statement not covered" >        hedgingVault.enterPosition()</span>;
    }
&nbsp;
    /**
        @notice Exits the position of the hedging vault by setting first the Uniswap V3 swap route,
        and then exiting the position.
&nbsp;
        @param swapInfo The Uniswap V3 route to swap the received pay-out from USDC back to the hedged asset
&nbsp;
        @dev Only the owner of the contract (i.e. the Operator) can call this function
     */
<span class="fstat-no" title="function not covered" >    function exitPosition(IUniswapV3Oracle.SwapInfo calldata swapInfo) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        potionBuyAction.setSwapInfo(swapInfo)</span>;
<span class="cstat-no" title="statement not covered" >        hedgingVault.exitPosition()</span>;
    }
&nbsp;
    /**
        @notice Convenience function to know if a position can be entered or not
&nbsp;
        @dev Just redirects the call to the hedging vault
     */
<span class="fstat-no" title="function not covered" >    function canPositionBeEntered() external view returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        return hedgingVault.canPositionBeEntered();</span>
    }
&nbsp;
    /**
        @notice Convenience function to know if a position can be exited or not
&nbsp;
        @dev Just redirects the call to the hedging vault
     */
<span class="fstat-no" title="function not covered" >    function canPositionBeExited() external view returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        return hedgingVault.canPositionBeExited();</span>
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Jun 28 2022 12:30:51 GMT+0200 (Central European Summer Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
