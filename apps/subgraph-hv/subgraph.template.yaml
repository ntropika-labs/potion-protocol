specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: InvestmentVault
    network: 
    source:
      address: 
      abi: InvestmentVault
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - HedgingVault
      abis:
        - name: InvestmentVault
          file: ../../contracts/hedging-vault/abis/contracts/vault/InvestmentVault.sol/InvestmentVault.json
      eventHandlers:
        - event: ActionsAdded(address[])
          handler: handleActionsAdded
        - event: VaultPositionEntered(uint256,uint256)
          handler: handleVaultPositionEntered
        - event: VaultPositionExited(uint256)
          handler: handleVaultPositionExited
        - event: Deposit(indexed address,indexed address,uint256,uint256)
          handler: handleDeposit
        - event: Withdraw(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleWithdraw
      file: ./src/investmentVault.ts
  
  - kind: ethereum/contract
    name: PotionBuyAction
    network: 
    source:
      address: 
      abi: PotionBuyAction
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - PotionBuyAction
      abis:
        - name: PotionBuyAction
          file: ../../contracts/hedging-vault/abis/contracts/actions/PotionBuyAction.sol/PotionBuyAction.json
      eventHandlers:
        - event: ActionPositionEntered(indexed address,uint256)
          handler: handleActionPositionEntered
        - event: ActionPositionExited(indexed address,uint256)
          handler: handleActionPositionExited
        - event: MaxPremiumPercentageChanged(uint256)
          handler: handleMaxPremiumPercentageChanged
      file: ./src/potionBuyAction.ts
  
  - kind: ethereum/contract
    name: RoundsInputVault
    network: 
    source:
      address: 
      abi: RoundsInputVault
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Round
      abis:
        - name: RoundsInputVault
          file: ../../contracts/hedging-vault/abis/contracts/rounds/RoundsInputVault.sol/RoundsInputVault.json
      eventHandlers:
        - event: DepositWithReceipt(indexed address,indexed address,uint256,uint256)
          handler: handleDepositWithReceipt
        - event: NextRound(indexed uint256)
          handler: handleNextRound
        - event: RedeemReceipt(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleRedeemReceipt
        - event: RedeemReceiptBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleRedeemReceiptBatch
        - event: WithdrawExchangeAsset(indexed address,indexed address,indexed address,uint256,uint256,uint256)
          handler: handleWithdrawExchangeAsset
        - event: WithdrawExchangeAssetBatch(indexed address,indexed address,indexed address,uint256,uint256[],uint256[])
          handler: handleWithdrawExchangeAssetBatch
      file: ./src/roundsInputVault.ts
  
  - kind: ethereum/contract
    name: RoundsOutputVault
    network: 
    source:
      address: 
      abi: RoundsOutputVault
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Round
      abis:
        - name: RoundsOutputVault
          file: ../../contracts/hedging-vault/abis/contracts/rounds/RoundsOutputVault.sol/RoundsOutputVault.json
      eventHandlers:
        - event: DepositWithReceipt(indexed address,indexed address,uint256,uint256)
          handler: handleDepositWithReceipt
        - event: NextRound(indexed uint256)
          handler: handleNextRound
        - event: RedeemReceipt(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleRedeemReceipt
        - event: RedeemReceiptBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleRedeemReceiptBatch
        - event: WithdrawExchangeAsset(indexed address,indexed address,indexed address,uint256,uint256,uint256)
          handler: handleWithdrawExchangeAsset
        - event: WithdrawExchangeAssetBatch(indexed address,indexed address,indexed address,uint256,uint256[],uint256[])
          handler: handleWithdrawExchangeAssetBatch
      file: ./src/roundsOutputVault.ts
